<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VEGA VIP - App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { background: linear-gradient(135deg, #9688F3 0%, #5B3AE7 100%); min-height: 100vh; font-family: 'Segoe UI', Arial, sans-serif; margin:0;}
    .vega-container { max-width: 360px; margin: 48px auto; border-radius: 21px; background: rgba(70,46,158,.52); box-shadow: 0 12px 38px #412a9469, 0 1px 8px #fff2 inset; padding: 30px 20px 18px 20px; backdrop-filter: blur(11px); border: 1.8px solid #e4d2ff29;}
    .header-bar { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
    .header-bar span { font-weight:700;font-size:1.18em;color:#ffe870;letter-spacing:0.10em; text-shadow: 1px 1px 10px #fff7a999;}
    .lang-sel { font-size: 1em; background: #775afd; color: #fff; border-radius: 8px; box-shadow: 0 2px 8px #b5a8fb33; padding: 4px 16px; font-weight: 600;}
    .page-title { text-align: center; font-size: 1.24em; margin-bottom: 26px; font-weight: bold; color: #ffe870; margin-top: 0px; letter-spacing: 0.04em;}
    .tab-row { display: flex; width: 100%; background: #6e52e5; border-radius: 9px; margin-bottom: 18px; overflow: hidden;}
    .tab-row button { flex: 1; background: inherit; border: none; color: #e9cf65; font-size: 1.04em; font-weight: 600; padding: 14px 0px; cursor: pointer; letter-spacing: 0.02em; transition: .16s;}
    .tab-row .active { background: #ffe870; color: #5b3ae7; border-radius: 9px;}
    .input-label { color: #ffe870; font-size: 1em; font-weight: 500; display: block; margin-bottom: 3px; margin-top:10px;}
    .input-box { position: relative; margin-top: 6px;}
    .input-box input,.input-box select { width: 100%; padding: 12px 46px 12px 36px; font-size: 1.1em; border-radius: 12px; border: none; background: linear-gradient(90deg,#6e52e5 60%, #6d44de 100%); color: #fff; outline: none; font-weight: 500; box-sizing: border-box; box-shadow: 0 2px 11px #624ecd20; margin-bottom: 0px;}
    .input-box select { width: 92px; padding: 12px 10px 12px 31px; background: #6d44de; color: #fff;}
    .box-icon { position: absolute; left: 11px; top: 50%; transform: translateY(-50%); font-size: 1.22em; color: #ffe870; opacity: 0.86;}
    .eye-btn { position: absolute; right: 13px; top: 50%; transform: translateY(-50%); font-size: 1.18em; color: #ffe870; cursor: pointer; opacity: .75;}
    .form-btn { width: 100%; background: linear-gradient(90deg,#ffd600,#ffe870); color: #5b3ae7; border: none; font-size: 1.23em; font-weight: bold; padding: 14px 0; margin-top: 18px; border-radius: 11px; cursor: pointer; box-shadow: 0 2px 14px #ffe87033; transition: 0.18s;}
    .form-btn:active { background: linear-gradient(90deg,#ffe870,#ffd600);}
    .back-btn, .register-btn { width: 100%; background: transparent; color: #ffd600; border: 2px solid #ffd600; font-size: 1.11em; font-weight: bold; padding: 13px 0; margin-top: 13px; border-radius: 11px; cursor: pointer; box-shadow: 0 2px 7px #ffd60022; margin-bottom:9px;}
    .actions-underline { margin-top: 19px; padding-top: 13px; border-top: 2px solid #ffe87088; display: flex; justify-content: space-between; align-items: center;}
    .action-btn { display: flex; flex-direction: column; align-items: center; cursor: pointer; min-width: 98px; transition: 0.17s;}
    .action-btn i { color: #ffd600; background: #6e52e5; font-size: 1.5em; padding: 8px; border-radius: 55%; margin-bottom: 2px; box-shadow: 0 1px 9px #ffe87056;}
    .action-btn span { color: #ffd600; font-size: 1.06em; font-weight: 600; letter-spacing: 0.01em; margin-top: 1px; text-align:center;}
    .action-btn:active i { background: #ffe870; color: #5b3ae7;}
    .action-btn:active span { color: #fffbe2;}
    .priv-row { font-size: .98em; color: #ffe870; margin: 18px 0 7px 0;}
    .priv-row a { color: #e9cf65; text-decoration: underline; margin-left: 5px;}
    ::-webkit-input-placeholder { color: #f7e4cabb;}
    ::-moz-placeholder { color: #e9e5f8bb;}
    :-ms-input-placeholder { color: #dfd1f8bb;}
    ::placeholder { color: #e8dcfdbb;}
    @media(max-width:400px) { .vega-container { max-width:97vw;} .action-btn { min-width:68px;} .action-btn i{padding:6px;font-size:1.18em;} }
  </style>
</head>
<body>
  <div class="vega-container">
    <div class="header-bar">
      <span>VEGA VIP</span>
      <select class="lang-sel"><option>EN</option><option>हिंदी</option></select>
    </div>
    <!-- LOGIN FORM -->
    <div id="login-panel">
      <div class="page-title">Login</div>
      <div class="tab-row">
        <button id="btn-login-phone" class="active" onclick="switchLoginTab('phone')">Phone</button>
        <button id="btn-login-uid" onclick="switchLoginTab('uid')">UID</button>
      </div>
      <div id="login-phone">
        <div class="input-label">Phone Number</div>
        <div class="input-box" style="display: flex; gap:7px;">
          <span class="box-icon"><i class="fa-solid fa-mobile-screen-button"></i></span>
          <select id="loginCountry"><option value="+91">+91</option></select>
          <input type="text" id="loginPhone" placeholder="Please input your phone num" style="flex:1; margin-left:-7px;">
        </div>
        <div class="input-label">Password</div>
        <div class="input-box">
          <span class="box-icon"><i class="fa-solid fa-lock"></i></span>
          <input type="password" id="loginPassword" placeholder="Password">
          <span class="eye-btn" onclick="togglePwd('loginPassword',this)"><i class="fa-regular fa-eye"></i></span>
        </div>
      </div>
      <div id="login-uid" style="display:none;">
        <div class="input-label">UID</div>
        <div class="input-box">
          <span class="box-icon"><i class="fa-solid fa-id-badge"></i></span>
          <input type="text" id="loginUID" placeholder="Please input your UID">
        </div>
        <div class="input-label">Password</div>
        <div class="input-box">
          <span class="box-icon"><i class="fa-solid fa-lock"></i></span>
          <input type="password" id="loginUIDPassword" placeholder="Password">
          <span class="eye-btn" onclick="togglePwd('loginUIDPassword',this)"><i class="fa-regular fa-eye"></i></span>
        </div>
      </div>
      <button class="form-btn" onclick="doLogin(event)">Login</button>
      <button class="register-btn" onclick="showRegister()">Register</button>
      <div class="actions-underline">
        <div class="action-btn" onclick="showReset()">
          <i class="fa-solid fa-unlock-keyhole"></i>
          <span>Forgot Password</span>
        </div>
        <div class="action-btn" onclick="alert('Customer Service open!')">
          <i class="fa-solid fa-headset"></i>
          <span>Customer Service</span>
        </div>
      </div>
    </div>
    <!-- REGISTER FORM -->
    <div id="register-panel" style="display:none;">
      <div class="page-title">Register Your Phone</div>
      <div class="input-label">Phone Number</div>
      <div class="input-box" style="display: flex; gap:7px;">
        <span class="box-icon"><i class="fa-solid fa-mobile-screen-button"></i></span>
        <select id="regCountry"><option value="+91">+91</option></select>
        <input type="text" id="regPhone" placeholder="Please input your phone num" style="flex:1; margin-left:-7px;">
      </div>
      <div class="input-label">Set Password</div>
      <div class="input-box">
        <span class="box-icon"><i class="fa-solid fa-lock"></i></span>
        <input type="password" id="regPassword" placeholder="Set Password">
        <span class="eye-btn" onclick="togglePwd('regPassword',this)"><i class="fa-regular fa-eye"></i></span>
      </div>
      <div class="input-label">Confirm Password</div>
      <div class="input-box">
        <span class="box-icon"><i class="fa-solid fa-lock"></i></span>
        <input type="password" id="regPassword2" placeholder="Confirm Password">
        <span class="eye-btn" onclick="togglePwd('regPassword2',this)"><i class="fa-regular fa-eye"></i></span>
      </div>
      <div class="input-label">Invite Code</div>
      <div class="input-box">
        <span class="box-icon"><i class="fa-solid fa-gift"></i></span>
        <input type="text" id="inviteCode" placeholder="Please enter the invitation code">
      </div>
      <div class="priv-row">
        <input type="checkbox" id="regPrivacy"> I agree <a href="#">[Privacy Policy]</a>
      </div>
      <button class="form-btn" id="regBtn" onclick="doRegister(event)">Register</button>
      <div id="uidBox" style="display:none;padding:12px;text-align:center;background:#ffd60022;color:#5b3ae7;margin-top:14px;border-radius:8px;">
        Your Generated UID: <span id="newUID" style="font-weight:bold"></span>
      </div>
      <button class="back-btn" onclick="showLogin()">Back to Login</button>
    </div>
    <!-- RESET PASSWORD -->
    <div id="reset-panel" style="display:none;">
      <div class="page-title">Reset Password</div>
      <div class="input-label">Phone Number</div>
      <div class="input-box" style="display: flex; gap:7px;">
        <span class="box-icon"><i class="fa-solid fa-mobile-screen-button"></i></span>
        <select><option>+91</option></select>
        <input type="text" id="resetPhone" placeholder="Please input your phone num" style="flex:1; margin-left:-7px;">
      </div>
      <div class="input-label">New Password</div>
      <div class="input-box">
        <span class="box-icon"><i class="fa-solid fa-lock"></i></span>
        <input type="password" id="resetNewPassword" placeholder="New Password">
        <span class="eye-btn" onclick="togglePwd('resetNewPassword',this)"><i class="fa-regular fa-eye"></i></span>
      </div>
      <div class="input-label">Confirm Password</div>
      <div class="input-box">
        <span class="box-icon"><i class="fa-solid fa-lock"></i></span>
        <input type="password" id="resetConfirmPassword" placeholder="Confirm Password">
        <span class="eye-btn" onclick="togglePwd('resetConfirmPassword',this)"><i class="fa-regular fa-eye"></i></span>
      </div>
      <button class="form-btn" onclick="doResetPassword(event)">Reset Password</button>
      <button class="back-btn" onclick="showLogin()">Back to Login</button>
    </div>
  </div>
<script>
function showLogin() { document.getElementById('login-panel').style.display = 'block'; document.getElementById('register-panel').style.display = 'none'; document.getElementById('reset-panel').style.display = 'none'; }
function showRegister() { document.getElementById('login-panel').style.display = 'none'; document.getElementById('register-panel').style.display = 'block'; document.getElementById('reset-panel').style.display = 'none'; }
function showReset() { document.getElementById('login-panel').style.display = 'none'; document.getElementById('register-panel').style.display = 'none'; document.getElementById('reset-panel').style.display = 'block'; }
function togglePwd(id, btn) { let inp = document.getElementById(id); let eye = btn.querySelector('i'); if(inp.type === 'password') { inp.type = 'text'; eye.classList.remove('fa-eye'); eye.classList.add('fa-eye-slash'); } else { inp.type = 'password'; eye.classList.remove('fa-eye-slash'); eye.classList.add('fa-eye'); } }
function switchLoginTab(tab) { document.getElementById('login-phone').style.display = (tab === 'phone') ? 'block' : 'none'; document.getElementById('login-uid').style.display = (tab === 'uid') ? 'block' : 'none'; document.getElementById('btn-login-phone').classList.toggle('active', tab === 'phone'); document.getElementById('btn-login-uid').classList.toggle('active', tab === 'uid'); }
showLogin(); switchLoginTab('phone');

async function doRegister(event) {
  event.preventDefault();
  const phone = document.getElementById('regPhone').value;
  const pwd = document.getElementById('regPassword').value;
  const pwd2 = document.getElementById('regPassword2').value;
  const invite = document.getElementById('inviteCode').value;
  if (!phone || !pwd) return alert("Enter phone and password");
  if (pwd !== pwd2) return alert("Passwords do not match");
  if(!document.getElementById('regPrivacy').checked) return alert("Accept privacy");
  try {
    const res = await fetch('http://localhost:3000/api/register', {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ phone, password: pwd, invite })
    });
    const data = await res.json();
    if(data.success) {
      document.getElementById('uidBox').style.display = 'block';
      document.getElementById('newUID').textContent = data.uid;
      alert('Registration successful! Your UID: ' + data.uid);
    } else {
      alert(data.error || "Registration failed");
    }
  } catch(err) {
    alert("Network error");
  }
}

async function doLogin(event) {
  event.preventDefault();
  if(document.getElementById('login-phone').style.display !== "none") {
    const phone = document.getElementById('loginPhone').value;
    const pwd = document.getElementById('loginPassword').value;
    try {
      const res = await fetch('http://localhost:3000/api/login', {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ phone, password: pwd })
      });
      const data = await res.json();
      if(data.success) {
        alert("Login Success! UID: "+data.uid);
      } else {
        alert(data.error || "Invalid credentials!");
      }
    } catch(err) {
      alert("Network error");
    }
  } else {
    const uid = document.getElementById('loginUID').value;
    const pwd = document.getElementById('loginUIDPassword').value;
    try {
      const res = await fetch('http://localhost:3000/api/login-uid', {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ uid, password: pwd })
      });
      const data = await res.json();
      if(data.success) {
        alert("Login Success! UID: "+data.uid);
      } else {
        alert(data.error || "Invalid credentials!");
      }
    } catch(err) {
      alert("Network error");
    }
  }
}
async function doResetPassword(event) {
  event.preventDefault();
  const phone = document.getElementById('resetPhone').value;
  const newp = document.getElementById('resetNewPassword').value;
  const newp2 = document.getElementById('resetConfirmPassword').value;
  if(newp !== newp2) return alert("Passwords do not match!");
  try {
    const res = await fetch('http://localhost:3000/api/reset', {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ phone, password: newp })
    });
    const data = await res.json();
    if(data.success) {
      alert("Password reset success!");
    } else {
      alert(data.error || "Error resetting password!");
    }
  } catch(err) {
    alert("Network error");
  }
}
</script>
</body>
</html>
